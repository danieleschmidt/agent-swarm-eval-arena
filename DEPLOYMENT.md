# Swarm Arena Deployment Guide\n\nðŸš€ **Complete deployment guide for Swarm Arena in production environments**\n\n## Quick Start\n\n```bash\n# Clone repository\ngit clone https://github.com/danieleschmidt/agent-swarm-eval-arena.git\ncd agent-swarm-eval-arena\n\n# Deploy with Docker (recommended for development)\n./scripts/deploy.sh dev docker\n\n# Deploy to Kubernetes (recommended for production)\n./scripts/deploy.sh prod k8s\n```\n\n## Deployment Options\n\n### 1. Docker Deployment (Development/Testing)\n\n**Prerequisites:**\n- Docker Engine 20.10+\n- Docker Compose 2.0+\n- 8GB RAM minimum\n- 4 CPU cores minimum\n\n**Quick Deploy:**\n```bash\n# Development environment\n./scripts/deploy.sh dev docker\n\n# Production-like environment\n./scripts/deploy.sh prod docker\n```\n\n**Services Included:**\n- Swarm Arena (main application)\n- Ray cluster (head + 2 workers)\n- Redis (state management)\n- Prometheus (metrics)\n- Grafana (visualization)\n\n**Access Points:**\n- Swarm Arena WebSocket: `ws://localhost:8765`\n- Swarm Arena HTTP API: `http://localhost:8080`\n- Ray Dashboard: `http://localhost:8265`\n- Grafana: `http://localhost:3000` (admin/swarm-arena-admin)\n- Prometheus: `http://localhost:9090`\n\n### 2. Kubernetes Deployment (Production)\n\n**Prerequisites:**\n- Kubernetes cluster 1.20+\n- kubectl configured\n- 32GB RAM minimum\n- 16 CPU cores minimum\n- Persistent storage support\n\n**Deploy to Production:**\n```bash\n# Deploy to production Kubernetes\n./scripts/deploy.sh prod k8s\n\n# Check deployment status\nkubectl get pods -n swarm-arena\n\n# View logs\nkubectl logs -f deployment/swarm-arena -n swarm-arena\n```\n\n**Architecture:**\n- 3 Swarm Arena replicas (high availability)\n- Ray cluster: 1 head + 4 workers\n- Persistent storage for data and logs\n- Load balancer for external access\n- Horizontal pod autoscaling\n\n## Configuration\n\n### Environment Variables\n\n| Variable | Description | Default | Required |\n|----------|-------------|---------|----------|\n| `SWARM_ARENA_ENV` | Environment (dev/staging/prod) | dev | No |\n| `RAY_ADDRESS` | Ray cluster address | ray://localhost:10001 | No |\n| `REDIS_URL` | Redis connection URL | redis://localhost:6379 | No |\n| `MAX_AGENTS` | Maximum concurrent agents | 10000 | No |\n| `TELEMETRY_ENABLED` | Enable telemetry streaming | true | No |\n| `LOG_LEVEL` | Logging level | INFO | No |\n\n### Resource Requirements\n\n#### Minimum (Development)\n- CPU: 4 cores\n- RAM: 8GB\n- Storage: 10GB\n- Agents: Up to 1,000\n\n#### Recommended (Production)\n- CPU: 16 cores\n- RAM: 32GB\n- Storage: 100GB\n- Agents: Up to 10,000\n\n#### Large Scale (Enterprise)\n- CPU: 64+ cores\n- RAM: 128GB+\n- Storage: 500GB+\n- Agents: 50,000+\n\n## Security Configuration\n\n### 1. API Security\n```yaml\nsecurity:\n  require_https: true\n  api_key_length: 32\n  session_timeout: 3600\n  max_request_rate: 1000\n```\n\n### 2. Network Security\n- TLS encryption for all communications\n- API rate limiting\n- CORS protection\n- Security headers\n\n### 3. Secrets Management\n```bash\n# Update Kubernetes secrets\nkubectl create secret generic swarm-arena-secrets \\\n  --from-literal=redis-password=your-secure-password \\\n  --from-literal=api-secret=your-api-secret \\\n  -n swarm-arena\n```\n\n## Monitoring & Observability\n\n### Metrics Collection\n- **Prometheus**: System and application metrics\n- **Grafana**: Visualization dashboards\n- **Ray Dashboard**: Distributed computing metrics\n- **Custom Telemetry**: Real-time agent metrics\n\n### Key Metrics\n- Agent performance (rewards, actions, survival)\n- System resources (CPU, memory, network)\n- Simulation throughput (steps/second)\n- Ray cluster utilization\n- Error rates and latencies\n\n### Alerts\n```yaml\n# Example Prometheus alert\n- alert: HighMemoryUsage\n  expr: memory_usage > 80\n  for: 5m\n  annotations:\n    summary: High memory usage detected\n```\n\n## Scaling\n\n### Horizontal Scaling\n\n**Docker Compose:**\n```bash\n# Scale Ray workers\ndocker-compose up -d --scale ray-worker=8\n\n# Scale application instances\ndocker-compose up -d --scale swarm-arena=3\n```\n\n**Kubernetes:**\n```bash\n# Scale application\nkubectl scale deployment swarm-arena --replicas=5 -n swarm-arena\n\n# Scale Ray workers\nkubectl scale deployment ray-worker --replicas=8 -n swarm-arena\n```\n\n### Auto-scaling (Kubernetes)\n```yaml\napiVersion: autoscaling/v2\nkind: HorizontalPodAutoscaler\nmetadata:\n  name: swarm-arena-hpa\nspec:\n  scaleTargetRef:\n    apiVersion: apps/v1\n    kind: Deployment\n    name: swarm-arena\n  minReplicas: 3\n  maxReplicas: 20\n  metrics:\n  - type: Resource\n    resource:\n      name: cpu\n      target:\n        type: Utilization\n        averageUtilization: 70\n```\n\n## Performance Tuning\n\n### Ray Configuration\n```python\n# Optimize for large-scale simulations\nray_config = {\n    \"num_cpus\": 64,\n    \"num_gpus\": 4,\n    \"memory\": 128 * 1024 * 1024 * 1024,  # 128GB\n    \"object_store_memory\": 32 * 1024 * 1024 * 1024,  # 32GB\n}\n```\n\n### Application Tuning\n```yaml\nperformance:\n  batch_size: 1000\n  update_frequency: 30  # Hz\n  compression: true\n  async_processing: true\n```\n\n## Troubleshooting\n\n### Common Issues\n\n#### 1. Memory Issues\n```bash\n# Check memory usage\nkubectl top pods -n swarm-arena\n\n# Increase memory limits\nkubectl patch deployment swarm-arena -n swarm-arena -p '{\n  \"spec\": {\n    \"template\": {\n      \"spec\": {\n        \"containers\": [{\n          \"name\": \"swarm-arena\",\n          \"resources\": {\n            \"limits\": {\n              \"memory\": \"8Gi\"\n            }\n          }\n        }]\n      }\n    }\n  }\n}'\n```\n\n#### 2. Ray Connection Issues\n```bash\n# Check Ray cluster status\nkubectl exec -it deployment/ray-head -n swarm-arena -- ray status\n\n# Restart Ray cluster\nkubectl rollout restart deployment/ray-head -n swarm-arena\nkubectl rollout restart deployment/ray-worker -n swarm-arena\n```\n\n#### 3. Performance Issues\n```bash\n# Enable debug logging\nkubectl set env deployment/swarm-arena LOG_LEVEL=DEBUG -n swarm-arena\n\n# Check resource utilization\nkubectl top nodes\nkubectl top pods -n swarm-arena\n```\n\n### Logs and Debugging\n```bash\n# View application logs\nkubectl logs -f deployment/swarm-arena -n swarm-arena\n\n# View Ray logs\nkubectl logs -f deployment/ray-head -n swarm-arena\n\n# Debug pod issues\nkubectl describe pod <pod-name> -n swarm-arena\n```\n\n## Backup and Recovery\n\n### Data Backup\n```bash\n# Backup persistent volumes\nkubectl get pv\nkubectl create -f backup-job.yaml\n\n# Backup configuration\nkubectl get configmap swarm-arena-config -o yaml > config-backup.yaml\nkubectl get secret swarm-arena-secrets -o yaml > secrets-backup.yaml\n```\n\n### Disaster Recovery\n```bash\n# Restore from backup\nkubectl apply -f config-backup.yaml\nkubectl apply -f secrets-backup.yaml\n./scripts/deploy.sh prod k8s\n```\n\n## Maintenance\n\n### Regular Maintenance Tasks\n1. **Update Dependencies**: Monthly security updates\n2. **Log Rotation**: Clean old logs weekly\n3. **Resource Monitoring**: Check utilization daily\n4. **Backup Verification**: Test restores monthly\n5. **Performance Testing**: Load test quarterly\n\n### Updates and Rollbacks\n```bash\n# Update to new version\nkubectl set image deployment/swarm-arena swarm-arena=swarm-arena:v2.0.0 -n swarm-arena\n\n# Monitor rollout\nkubectl rollout status deployment/swarm-arena -n swarm-arena\n\n# Rollback if needed\nkubectl rollout undo deployment/swarm-arena -n swarm-arena\n```\n\n## Cost Optimization\n\n### Cloud Provider Optimizations\n\n**AWS:**\n- Use Spot instances for Ray workers\n- Auto Scaling Groups for dynamic scaling\n- EFS for shared persistent storage\n\n**GCP:**\n- Preemptible instances for cost savings\n- GKE Autopilot for managed scaling\n- Persistent disks for storage\n\n**Azure:**\n- Low-priority VMs for batch processing\n- AKS with cluster autoscaler\n- Azure Files for shared storage\n\n### Resource Optimization\n```bash\n# Right-size resources based on usage\nkubectl-recommend-resources deployment/swarm-arena -n swarm-arena\n\n# Use resource quotas\nkubectl apply -f resource-quota.yaml\n```\n\n## Support and Documentation\n\n- **Documentation**: [README.md](README.md)\n- **API Reference**: Auto-generated from code\n- **Examples**: [examples/](examples/)\n- **Issues**: GitHub Issues\n- **Community**: Discord/Slack (TBD)\n\n---\n\n## Next Steps\n\n1. **Deploy Development Environment**: `./scripts/deploy.sh dev docker`\n2. **Run Examples**: `python examples/basic_usage.py`\n3. **Scale to Production**: `./scripts/deploy.sh prod k8s`\n4. **Monitor Performance**: Access Grafana dashboard\n5. **Optimize Configuration**: Tune based on workload\n\n**ðŸŽ‰ Your Swarm Arena is ready for massive-scale multi-agent simulations!**"