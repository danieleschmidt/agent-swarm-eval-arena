#!/bin/bash\n\n# Swarm Arena Cleanup Script\n# Usage: ./cleanup.sh [environment] [mode]\n\nset -e\n\nENVIRONMENT=${1:-dev}\nMODE=${2:-docker}\n\necho \"ðŸ§¹ Cleaning up Swarm Arena deployment\"\necho \"Environment: $ENVIRONMENT\"\necho \"Mode: $MODE\"\necho \"====================================\"\n\n# Color codes\nRED='\\033[0;31m'\nGREEN='\\033[0;32m'\nYELLOW='\\033[1;33m'\nBLUE='\\033[0;34m'\nNC='\\033[0m'\n\nprint_status() {\n    echo -e \"${BLUE}[INFO]${NC} $1\"\n}\n\nprint_success() {\n    echo -e \"${GREEN}[SUCCESS]${NC} $1\"\n}\n\nprint_warning() {\n    echo -e \"${YELLOW}[WARNING]${NC} $1\"\n}\n\n# Cleanup Docker deployment\ncleanup_docker() {\n    print_status \"Cleaning up Docker deployment...\"\n    \n    # Stop and remove containers\n    docker-compose down -v --remove-orphans\n    \n    # Remove networks\n    docker network prune -f\n    \n    # Remove volumes (optional - comment out to preserve data)\n    read -p \"Remove persistent volumes? (y/N): \" -n 1 -r\n    echo\n    if [[ $REPLY =~ ^[Yy]$ ]]; then\n        docker volume prune -f\n        print_warning \"Persistent volumes removed\"\n    fi\n    \n    # Remove images (optional)\n    read -p \"Remove Swarm Arena images? (y/N): \" -n 1 -r\n    echo\n    if [[ $REPLY =~ ^[Yy]$ ]]; then\n        docker rmi swarm-arena:latest 2>/dev/null || true\n        print_warning \"Application images removed\"\n    fi\n    \n    print_success \"Docker cleanup completed\"\n}\n\n# Cleanup Kubernetes deployment\ncleanup_k8s() {\n    print_status \"Cleaning up Kubernetes deployment...\"\n    \n    # Delete application deployment\n    kubectl delete -f k8s/deployment.yaml --ignore-not-found=true\n    \n    # Delete Ray cluster\n    kubectl delete -f k8s/ray-cluster.yaml --ignore-not-found=true\n    \n    # Delete secrets and config\n    kubectl delete -f k8s/secrets.yaml --ignore-not-found=true\n    \n    # Wait for pods to terminate\n    print_status \"Waiting for pods to terminate...\"\n    kubectl wait --for=delete pods --all -n swarm-arena --timeout=300s 2>/dev/null || true\n    \n    # Delete namespace (optional)\n    read -p \"Delete swarm-arena namespace? (y/N): \" -n 1 -r\n    echo\n    if [[ $REPLY =~ ^[Yy]$ ]]; then\n        kubectl delete namespace swarm-arena --ignore-not-found=true\n        print_warning \"Namespace deleted\"\n    fi\n    \n    print_success \"Kubernetes cleanup completed\"\n}\n\n# Main cleanup\nif [ \"$MODE\" = \"docker\" ]; then\n    cleanup_docker\nelif [ \"$MODE\" = \"k8s\" ]; then\n    cleanup_k8s\nelse\n    print_error \"Invalid mode: $MODE\"\n    exit 1\nfi\n\nprint_success \"Cleanup completed successfully!\""